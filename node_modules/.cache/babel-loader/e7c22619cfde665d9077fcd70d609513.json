{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\nutrition-assistant-webapp\\\\frontend\\\\src\\\\Context\\\\AppContext.js\",\n    _s = $RefreshSig$();\n\nimport { useSnackbar } from 'notistack';\nimport { createContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { FullPageLoading } from '../Components/LoadingSpinner';\nimport { API } from '../services/apis';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AppContext = /*#__PURE__*/createContext({\n  isTourTaken: Boolean(),\n  setisTourTaken: () => {},\n  weekData: [],\n  fetchWeekData: () => {},\n  fetchTodaysConsumption: () => {},\n  nutrients: {},\n  setnutrients: () => {},\n  todayFoodItems: [],\n  userInfo: {},\n  isLoading: Boolean(),\n  maxCalories: Number(),\n  setmaxCalories: () => {},\n  setuserInfo: () => {},\n  handleLogout: () => {},\n  setisLoading: () => {}\n});\nexport const AppContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const navigate = useNavigate();\n  const [isLoading, setisLoading] = useState(false);\n  const [isTourTaken, setisTourTaken] = useState(false);\n  const [userInfo, setuserInfo] = useState({});\n  const [weekData, setweekData] = useState([]);\n  const [todayFoodItems, settodayFoodItems] = useState([]);\n  const [maxCalories, setmaxCalories] = useState(2000);\n  const [nutrients, setnutrients] = useState({\n    protiens: 0,\n    calcium: 0,\n    calorie: 0,\n    carbs: 0,\n    fats: 0,\n    maxprotiens: 165,\n    maxcalcium: 2000,\n    maxcarbs: 225,\n    maxfats: 97\n  });\n\n  const fetchWeekData = async () => {\n    try {\n      const res = await API.lastWeekCalorieDetails();\n      setweekData(res.weekData);\n    } catch (err) {\n      var _err$response, _err$response$data;\n\n      if (err !== null && err !== void 0 && (_err$response = err.response) !== null && _err$response !== void 0 && (_err$response$data = _err$response.data) !== null && _err$response$data !== void 0 && _err$response$data.msg) {\n        var _err$response2, _err$response2$data;\n\n        enqueueSnackbar(err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg, {\n          variant: 'error'\n        });\n      } else {\n        enqueueSnackbar('Something went wrong', {\n          variant: 'error'\n        });\n      }\n    }\n  };\n\n  const fetchTodaysConsumption = async () => {\n    setisLoading(true);\n\n    try {\n      const res = await API.todaysConsumption();\n      const tot_nutris = res.total_nutrients;\n      settodayFoodItems(res.food_items);\n      setnutrients(prevState => ({ ...prevState,\n        calorie: Number(tot_nutris.CALORIE.toFixed(2)),\n        protiens: Number(tot_nutris.PROTEINS).toFixed(2),\n        calcium: Number(tot_nutris.CALCIUM.toFixed(2)),\n        carbs: Number(tot_nutris.CARBOHYDRATES.toFixed(2)),\n        fats: Number(tot_nutris.FAT.toFixed(2))\n      }));\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n\n      console.log(err);\n      if (err !== null && err !== void 0 && (_err$response3 = err.response) !== null && _err$response3 !== void 0 && (_err$response3$data = _err$response3.data) !== null && _err$response3$data !== void 0 && _err$response3$data.msg) enqueueSnackbar(err === null || err === void 0 ? void 0 : (_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.msg, {\n        variant: 'error'\n      });else enqueueSnackbar('Something went wrrong', {\n        variant: 'error'\n      });\n    }\n\n    setisLoading(false);\n  };\n\n  const fetchUserInfo = async () => {\n    try {\n      const token = localStorage.getItem('token');\n\n      if (token) {\n        setisLoading(true);\n        const {\n          userInfo,\n          maxCalories\n        } = await API.userInfo();\n\n        if (userInfo !== null && userInfo !== void 0 && userInfo.IS_LOGIN_PROCESS_COMPLETE) {\n          setuserInfo(userInfo);\n          setmaxCalories(maxCalories);\n          navigate('/dashboard');\n          setisLoading(false);\n          return true;\n        } else {\n          navigate('/userInitialForm');\n        }\n      } else {\n        navigate('/');\n      }\n    } catch (err) {\n      navigate('/');\n    }\n\n    setisLoading(false);\n    return false;\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('userInfo');\n    localStorage.removeItem('token');\n    navigate('/');\n    setuserInfo({});\n  };\n\n  useEffect(() => {\n    async function exec() {\n      if (await fetchUserInfo()) {\n        fetchTodaysConsumption();\n        fetchWeekData();\n      }\n    }\n\n    exec();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      isTourTaken,\n      setisTourTaken,\n      isLoading,\n      weekData,\n      fetchWeekData,\n      nutrients,\n      fetchTodaysConsumption,\n      setnutrients,\n      todayFoodItems,\n      userInfo,\n      setuserInfo,\n      setmaxCalories,\n      maxCalories,\n      handleLogout,\n      setisLoading\n    },\n    children: [/*#__PURE__*/_jsxDEV(FullPageLoading, {\n      isLoading: isLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this), children]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AppContextProvider, \"7qgXzC2OclsF64tJwTZAj4dEp2U=\", false, function () {\n  return [useSnackbar, useNavigate];\n});\n\n_c = AppContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppContextProvider\");","map":{"version":3,"names":["useSnackbar","createContext","useEffect","useState","useNavigate","FullPageLoading","API","AppContext","isTourTaken","Boolean","setisTourTaken","weekData","fetchWeekData","fetchTodaysConsumption","nutrients","setnutrients","todayFoodItems","userInfo","isLoading","maxCalories","Number","setmaxCalories","setuserInfo","handleLogout","setisLoading","AppContextProvider","children","enqueueSnackbar","navigate","setweekData","settodayFoodItems","protiens","calcium","calorie","carbs","fats","maxprotiens","maxcalcium","maxcarbs","maxfats","res","lastWeekCalorieDetails","err","response","data","msg","variant","todaysConsumption","tot_nutris","total_nutrients","food_items","prevState","CALORIE","toFixed","PROTEINS","CALCIUM","CARBOHYDRATES","FAT","console","log","fetchUserInfo","token","localStorage","getItem","IS_LOGIN_PROCESS_COMPLETE","removeItem","exec"],"sources":["C:/Users/Lenovo/nutrition-assistant-webapp/frontend/src/Context/AppContext.js"],"sourcesContent":["import { useSnackbar } from 'notistack';\r\nimport { createContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FullPageLoading } from '../Components/LoadingSpinner';\r\nimport { API } from '../services/apis';\r\n\r\nexport const AppContext = createContext({\r\n    isTourTaken: Boolean(),\r\n    setisTourTaken: () => {},\r\n    weekData: [],\r\n    fetchWeekData: () => {},\r\n    fetchTodaysConsumption: () => {},\r\n    nutrients: {},\r\n    setnutrients: () => {},\r\n    todayFoodItems: [],\r\n    userInfo: {},\r\n    isLoading: Boolean(),\r\n    maxCalories: Number(),\r\n    setmaxCalories: () => {},\r\n    setuserInfo: () => {},\r\n    handleLogout: () => {},\r\n    setisLoading: () => {},\r\n});\r\n\r\nexport const AppContextProvider = ({ children }) => {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const navigate = useNavigate();\r\n    const [isLoading, setisLoading] = useState(false);\r\n    const [isTourTaken, setisTourTaken] = useState(false);\r\n\r\n    const [userInfo, setuserInfo] = useState({});\r\n    const [weekData, setweekData] = useState([]);\r\n    const [todayFoodItems, settodayFoodItems] = useState([]);\r\n    const [maxCalories, setmaxCalories] = useState(2000);\r\n    const [nutrients, setnutrients] = useState({\r\n        protiens: 0,\r\n        calcium: 0,\r\n        calorie: 0,\r\n        carbs: 0,\r\n        fats: 0,\r\n        maxprotiens: 165,\r\n        maxcalcium: 2000,\r\n        maxcarbs: 225,\r\n        maxfats: 97,\r\n    });\r\n\r\n    const fetchWeekData = async () => {\r\n        try {\r\n            const res = await API.lastWeekCalorieDetails();\r\n            setweekData(res.weekData);\r\n        } catch (err) {\r\n            if (err?.response?.data?.msg) {\r\n                enqueueSnackbar(err?.response?.data?.msg, {\r\n                    variant: 'error',\r\n                });\r\n            } else {\r\n                enqueueSnackbar('Something went wrong', {\r\n                    variant: 'error',\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const fetchTodaysConsumption = async () => {\r\n        setisLoading(true);\r\n        try {\r\n            const res = await API.todaysConsumption();\r\n            const tot_nutris = res.total_nutrients;\r\n            settodayFoodItems(res.food_items);\r\n\r\n            setnutrients((prevState) => ({\r\n                ...prevState,\r\n                calorie: Number(tot_nutris.CALORIE.toFixed(2)),\r\n                protiens: Number(tot_nutris.PROTEINS).toFixed(2),\r\n                calcium: Number(tot_nutris.CALCIUM.toFixed(2)),\r\n                carbs: Number(tot_nutris.CARBOHYDRATES.toFixed(2)),\r\n                fats: Number(tot_nutris.FAT.toFixed(2)),\r\n            }));\r\n        } catch (err) {\r\n            console.log(err);\r\n            if (err?.response?.data?.msg)\r\n                enqueueSnackbar(err?.response?.data?.msg, { variant: 'error' });\r\n            else enqueueSnackbar('Something went wrrong', { variant: 'error' });\r\n        }\r\n        setisLoading(false);\r\n    };\r\n\r\n    const fetchUserInfo = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n\r\n            if (token) {\r\n                setisLoading(true);\r\n                const { userInfo, maxCalories } = await API.userInfo();\r\n                if (userInfo?.IS_LOGIN_PROCESS_COMPLETE) {\r\n                    setuserInfo(userInfo);\r\n                    setmaxCalories(maxCalories);\r\n                    navigate('/dashboard');\r\n                    setisLoading(false);\r\n                    return true;\r\n                } else {\r\n                    navigate('/userInitialForm');\r\n                }\r\n            } else {\r\n                navigate('/');\r\n            }\r\n        } catch (err) {\r\n            navigate('/');\r\n        }\r\n        setisLoading(false);\r\n        return false;\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('userInfo');\r\n        localStorage.removeItem('token');\r\n        navigate('/');\r\n        setuserInfo({});\r\n    };\r\n\r\n    useEffect(() => {\r\n        async function exec() {\r\n            if (await fetchUserInfo()) {\r\n                fetchTodaysConsumption();\r\n                fetchWeekData();\r\n            }\r\n        }\r\n        exec();\r\n    }, []);\r\n\r\n    return (\r\n        <AppContext.Provider\r\n            value={{\r\n                isTourTaken,\r\n                setisTourTaken,\r\n                isLoading,\r\n                weekData,\r\n                fetchWeekData,\r\n                nutrients,\r\n                fetchTodaysConsumption,\r\n                setnutrients,\r\n                todayFoodItems,\r\n                userInfo,\r\n                setuserInfo,\r\n                setmaxCalories,\r\n                maxCalories,\r\n                handleLogout,\r\n                setisLoading,\r\n            }}\r\n        >\r\n            <FullPageLoading isLoading={isLoading} />\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}