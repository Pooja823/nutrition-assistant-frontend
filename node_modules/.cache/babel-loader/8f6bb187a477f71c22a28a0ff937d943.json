{"ast":null,"code":"import _objectSpread from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useSnackbar}from'notistack';import{createContext,useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{FullPageLoading}from'../Components/LoadingSpinner';import{API}from'../services/apis';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AppContext=/*#__PURE__*/createContext({isTourTaken:Boolean(),setisTourTaken:function setisTourTaken(){},weekData:[],fetchWeekData:function fetchWeekData(){},fetchTodaysConsumption:function fetchTodaysConsumption(){},nutrients:{},setnutrients:function setnutrients(){},todayFoodItems:[],userInfo:{},isLoading:Boolean(),maxCalories:Number(),setmaxCalories:function setmaxCalories(){},setuserInfo:function setuserInfo(){},handleLogout:function handleLogout(){},setisLoading:function setisLoading(){}});export var AppContextProvider=function AppContextProvider(_ref){var children=_ref.children;var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setisLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isTourTaken=_useState4[0],setisTourTaken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),userInfo=_useState6[0],setuserInfo=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),weekData=_useState8[0],setweekData=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),todayFoodItems=_useState10[0],settodayFoodItems=_useState10[1];var _useState11=useState(2000),_useState12=_slicedToArray(_useState11,2),maxCalories=_useState12[0],setmaxCalories=_useState12[1];var _useState13=useState({protiens:0,calcium:0,calorie:0,carbs:0,fats:0,maxprotiens:165,maxcalcium:2000,maxcarbs:225,maxfats:97}),_useState14=_slicedToArray(_useState13,2),nutrients=_useState14[0],setnutrients=_useState14[1];var fetchWeekData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,_err$response,_err$response$data,_err$response2,_err$response2$data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.lastWeekCalorieDetails();case 3:res=_context.sent;setweekData(res.weekData);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(_context.t0!==null&&_context.t0!==void 0&&(_err$response=_context.t0.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.msg){enqueueSnackbar(_context.t0===null||_context.t0===void 0?void 0:(_err$response2=_context.t0.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg,{variant:'error'});}else{enqueueSnackbar('Something went wrong',{variant:'error'});}case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchWeekData(){return _ref2.apply(this,arguments);};}();var fetchTodaysConsumption=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,tot_nutris,_err$response3,_err$response3$data,_err$response4,_err$response4$data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setisLoading(true);_context2.prev=1;_context2.next=4;return API.todaysConsumption();case 4:res=_context2.sent;tot_nutris=res.total_nutrients;settodayFoodItems(res.food_items);setnutrients(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{calorie:Number(tot_nutris.CALORIE.toFixed(2)),protiens:Number(tot_nutris.PROTEINS).toFixed(2),calcium:Number(tot_nutris.CALCIUM.toFixed(2)),carbs:Number(tot_nutris.CARBOHYDRATES.toFixed(2)),fats:Number(tot_nutris.FAT.toFixed(2))});});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);if(_context2.t0!==null&&_context2.t0!==void 0&&(_err$response3=_context2.t0.response)!==null&&_err$response3!==void 0&&(_err$response3$data=_err$response3.data)!==null&&_err$response3$data!==void 0&&_err$response3$data.msg)enqueueSnackbar(_context2.t0===null||_context2.t0===void 0?void 0:(_err$response4=_context2.t0.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.msg,{variant:'error'});else enqueueSnackbar('Something went wrrong',{variant:'error'});case 14:setisLoading(false);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function fetchTodaysConsumption(){return _ref3.apply(this,arguments);};}();var fetchUserInfo=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var token,_yield$API$userInfo,_userInfo,_maxCalories;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=localStorage.getItem('token');if(!token){_context3.next=20;break;}setisLoading(true);_context3.next=6;return API.userInfo();case 6:_yield$API$userInfo=_context3.sent;_userInfo=_yield$API$userInfo.userInfo;_maxCalories=_yield$API$userInfo.maxCalories;if(!(_userInfo!==null&&_userInfo!==void 0&&_userInfo.IS_LOGIN_PROCESS_COMPLETE)){_context3.next=17;break;}setuserInfo(_userInfo);setmaxCalories(_maxCalories);navigate('/dashboard');setisLoading(false);return _context3.abrupt(\"return\",true);case 17:navigate('/userInitialForm');case 18:_context3.next=21;break;case 20:navigate('/');case 21:_context3.next=26;break;case 23:_context3.prev=23;_context3.t0=_context3[\"catch\"](0);navigate('/');case 26:setisLoading(false);return _context3.abrupt(\"return\",false);case 28:case\"end\":return _context3.stop();}}},_callee3,null,[[0,23]]);}));return function fetchUserInfo(){return _ref4.apply(this,arguments);};}();var handleLogout=function handleLogout(){localStorage.removeItem('userInfo');localStorage.removeItem('token');navigate('/');setuserInfo({});};useEffect(function(){function exec(){return _exec.apply(this,arguments);}function _exec(){_exec=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetchUserInfo();case 2:if(!_context4.sent){_context4.next=5;break;}fetchTodaysConsumption();fetchWeekData();case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _exec.apply(this,arguments);}exec();},[]);return/*#__PURE__*/_jsxs(AppContext.Provider,{value:{isTourTaken:isTourTaken,setisTourTaken:setisTourTaken,isLoading:isLoading,weekData:weekData,fetchWeekData:fetchWeekData,nutrients:nutrients,fetchTodaysConsumption:fetchTodaysConsumption,setnutrients:setnutrients,todayFoodItems:todayFoodItems,userInfo:userInfo,setuserInfo:setuserInfo,setmaxCalories:setmaxCalories,maxCalories:maxCalories,handleLogout:handleLogout,setisLoading:setisLoading},children:[/*#__PURE__*/_jsx(FullPageLoading,{isLoading:isLoading}),children]});};","map":null,"metadata":{},"sourceType":"module"}