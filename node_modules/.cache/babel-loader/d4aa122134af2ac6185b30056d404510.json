{"ast":null,"code":"import _objectSpread from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Lenovo/nutrition-assistant-webapp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box}from'@mui/material';import{Container}from'@mui/system';import{useSnackbar}from'notistack';import React,{useContext,useState}from'react';import{useNavigate}from'react-router-dom';import{AppContext}from'../../Context/AppContext';import{API}from'../../services/apis';import{googleOauthPopup}from'../../services/firebase';import'../../styles/auth.modules.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signup=function Signup(){var navigate=useNavigate();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useContext=useContext(AppContext),fetchTodaysConsumption=_useContext.fetchTodaysConsumption,setmaxCalories=_useContext.setmaxCalories,fetchWeekData=_useContext.fetchWeekData,setuserInfo=_useContext.setuserInfo;var _useState=useState({username:'',email:'',password:'',confirmPassword:''}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setstate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setisLoading=_useState4[1];var handleGoogleOauth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setisLoading(true);_context.prev=1;_context.next=4;return googleOauthPopup();case 4:accessToken=_context.sent;_context.next=7;return API.signInWithGoogle({accessToken:accessToken});case 7:res=_context.sent;localStorage.setItem('token',res.token);localStorage.setItem('userInfo',JSON.stringify(res.user));if(res.user.IS_LOGIN_PROCESS_COMPLETE){setmaxCalories(res.maxCalories);setuserInfo(res.user);navigate('/dashboard');fetchTodaysConsumption();fetchWeekData();}else{navigate('/userInitialForm');}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);enqueueSnackbar('Something went wrong',{variant:'error'});case 16:setisLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function handleGoogleOauth(){return _ref.apply(this,arguments);};}();var handleSignUp=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,_err$response,_err$response$data,_err$response2,_err$response2$data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(state.email.trim()===''||state.password.trim()===''||state.username.trim()==='')){_context2.next=3;break;}enqueueSnackbar('Please fill all details',{variant:'error'});return _context2.abrupt(\"return\");case 3:if(!(state.password!==state.confirmPassword)){_context2.next=6;break;}enqueueSnackbar(\"Passwords doesn't match\",{variant:'error'});return _context2.abrupt(\"return\");case 6:setisLoading(true);_context2.prev=7;_context2.next=10;return API.signup({email:state.email,password:state.password,username:state.username});case 10:res=_context2.sent;localStorage.setItem('token',res.token);navigate('/userInitialForm');_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](7);if(_context2.t0!==null&&_context2.t0!==void 0&&(_err$response=_context2.t0.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.msg)enqueueSnackbar(_context2.t0===null||_context2.t0===void 0?void 0:(_err$response2=_context2.t0.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg,{variant:'error'});else{enqueueSnackbar('Something went wrong',{variant:'error'});}case 18:setisLoading(false);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[7,15]]);}));return function handleSignUp(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(45deg, rgba(244,235,215,1) 50%, rgba(241,181,113,1) 50%)',minHeight:'110vh'},children:[/*#__PURE__*/_jsx(\"img\",{style:{width:'4rem',padding:'6px 0 0 6px'},src:\"/static/img/logo_crop.png\",alt:\"\"}),/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",style:{marginTop:'10px'},children:/*#__PURE__*/_jsxs(Box,{sx:{mx:'1rem',p:'1rem',backgroundColor:'#fff',borderRadius:'8px',boxShadow:'0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)'},children:[/*#__PURE__*/_jsx(\"h1\",{align:\"center\",children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"User Name\"}),/*#__PURE__*/_jsx(\"input\",{value:state.username,onChange:function onChange(e){return setstate(_objectSpread(_objectSpread({},state),{},{username:e.target.value}));},placeholder:\"Username\",className:\"textField\",type:\"text\"}),/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",className:\"textField\",type:\"email\",value:state.email,onChange:function onChange(e){return setstate(_objectSpread(_objectSpread({},state),{},{email:e.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{placeholder:\"password\",className:\"label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:state.password,onChange:function onChange(e){return setstate(_objectSpread(_objectSpread({},state),{},{password:e.target.value}));},className:\"textField\",type:\"password\"}),/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{value:state.confirmPassword,onChange:function onChange(e){return setstate(_objectSpread(_objectSpread({},state),{},{confirmPassword:e.target.value}));},className:\"textField\",type:\"password\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'row',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSignUp,disabled:isLoading,style:{display:'flex',justifyContent:'center',alignItems:'center',padding:'12px 24px',borderRadius:'6px',fontSize:'20px',backgroundColor:'var(--themecolor)',color:'#fff',border:'1px solid var(--themecolor)',marginTop:'20px'},className:\"btn\",type:\"submit\",children:/*#__PURE__*/_jsx(\"span\",{children:\" Register\"})})}),/*#__PURE__*/_jsxs(\"button\",{disabled:isLoading,style:{color:'var(--themecolor)',marginTop:'14px',background:'#fff',border:'1px solid #fff'},onClick:function onClick(e){navigate('/signin');},children:[\"Already have an account? sign in\",' ']})]}),/*#__PURE__*/_jsx(\"hr\",{style:{marginTop:'15px'}}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"button\",{disabled:isLoading,onClick:handleGoogleOauth,style:{display:'flex',justifyContent:'center',alignItems:'center',fontSize:'20px',padding:'10px 18px',border:'0px solid black',borderRadius:'5px',margin:'10px 0',background:'#fff',boxShadow:'0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)'},children:[/*#__PURE__*/_jsx(\"img\",{style:{width:'24px',margin:'3px 10px 0 0'},src:\"/static/img/google_icon.png\",alt:\"google icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Login with Google\"})]})})]})})]});};export default Signup;","map":null,"metadata":{},"sourceType":"module"}